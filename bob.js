var faceBoxWidth = 380;

function attr(obj, c) {
  obj.attr({"stroke":"black", "stroke-width":1, "fill":c});
}

var ear = "m 40.59437,217.14974 13.43503,62.2254 C 31.5702,287.69912 6.6853901,237.38777 40.59437,217.14974 z"
var bangs = "M 158,62.999998 C 21.30825,17.859279 10.095242,188.38008 41,261 52.381369,241.00097 46.278434,150.8719 65,148 c -12.089151,12.81847 5.156524,49.52609 9,65 -6.585501,-7.9026 9.777697,-103.14717 18,-96 -7.776545,10.44165 5,35 5,35 3.92641,-23.46565 12.27727,-41.81422 27,-49 4.32187,16.80098 -4.19892,26.84267 16,52 -7.84115,-2.76747 8.21542,-57.212007 20,-63.000007 6.60524,-3.24417 35.03475,38.930517 23.63604,61.727927 C 195.42791,141.58878 197.18008,112.2139 200,91.999993 c 12.67928,20.626087 38.18628,42.764637 24.4835,67.939347 19.35987,-20.92656 21.76198,-34.41337 20.5165,-45.93935 19.64807,-2.7657 39.69203,112.687 41.54981,122.63798 1.46243,7.83334 14.49625,-83.70053 12.09922,-86.18864 C 296.95728,148.6933 319.79938,213.39572 321,226 352.9666,117.7081 245.97365,-4.1998251 158,62.999998 z";
var face = "m 160,85 c 66.29513,1.682163 112.36946,18.98674 137,63 28.43215,52.37451 15.18881,103.80089 -11,144 -23.83523,37.74797 -53.56788,58.3328 -106,65 C 133.44299,345.75738 90.307808,328.23374 59,289 38.778604,252.28536 30.017316,210.65925 47,158 68.898832,107.86476 108.80357,87.193728 160,85 z";
var hair = "m 172,92.222874 c -46.4367,14.740416 -71.55156,35.680926 -82,79.999996 -10.26263,-3.01347 -1.84237,-36.30323 -6,-48 -30.10906,39.22338 -21.99468,72.43161 -34,122 -10.8455,-19.28236 -26.98751,-81.52083 -20,-108 -15.33743,4.77503 -42.79047,-32.28293 -53,-63 34.495029,16.49428 64.890873,9.69849 88,4e-6 -24.74882,-20.88941 -30.16736,-69.925625 -19,-87 67.81651,126.761806 64.6624,37.078855 109,2.9999998 7.51716,16.852238 3.79734,36.9150452 28,48.9999952 l 78,-59.999995 c -8.06149,39.218858 -26.15384,83.16185 4,77 10.06169,-20.632062 26.72663,-26.202505 65,-17.000005 -15.60075,22.289215 -26.13844,32.092565 -30,58.500001 32.63796,-8.89315 49.77287,6.71798 70.5,24.5 -24.08089,5.891 -35.2487,15.19345 -46.66548,28.17157 22.03164,9.80476 36.22824,30.62071 34.66548,62.32843 -14.0658,-14.16233 -17.86912,-10.01227 -35.5,-8.5 -4.46081,15.61757 -9.95055,28.14834 -7,66 -4.63571,-3.04643 -9.62506,-16.06241 -9,-27 -10.99511,2.00977 -14.88065,-2.76129 -18,15 2.61877,-41.23755 2.95345,-54.90691 8,-101 -13.27996,5.72003 -17.62594,22.37405 -18,41 -11.66667,-34.863 -12.33333,-6.97621 -24,-75 -12.26286,9.95729 -9.86581,24.73705 -6,40 -16.95218,-11.80967 -26.94909,-28.25616 -20,-56 -34.615,1.77 -63.34139,15.3172 -90,33 11.27818,-12.58293 14.94549,-25.67623 45,-37 -13.84631,2.13638 -32.12399,7.26624 -46,19 8.87738,-10 9.624,-21 34,-30.999996 z";
var neck = "m 125,337 112,0 2,55 c -60.46398,3.95933 -101.49587,-0.16839 -113,0 z";
var pupil1 = "m 134.79588,216.12703 c 0,16.30049 -10.53307,29.51463 -23.52627,29.51463 -12.993202,0 -23.526266,-13.21414 -23.526266,-29.51463 0,-16.30048 10.533064,-29.51462 23.526266,-29.51462 12.9932,0 23.52627,13.21414 23.52627,29.51462 z";
var bigreflect1 = "m 139.7868,215.50037 c 0,13.26981 -8.41818,24.0271 -18.80254,24.0271 -10.38435,0 -18.80254,-10.75729 -18.80254,-24.0271 0,-13.2698 8.41819,-24.02709 18.80254,-24.02709 10.38436,0 18.80254,10.75729 18.80254,24.02709 z";
var smallreflect1 = "m 100.30147,230.4263 c 0,5.02644 -3.507581,9.10117 -7.834397,9.10117 -4.326816,0 -7.834393,-4.07473 -7.834393,-9.10117 0,-5.02644 3.507577,-9.10118 7.834393,-9.10118 4.326816,0 7.834397,4.07474 7.834397,9.10118 z";
var pupil2 = "m 259.48572,216.12673 c 0,16.30049 -10.53307,29.51463 -23.52627,29.51463 -12.9932,0 -23.52627,-13.21414 -23.52627,-29.51463 0,-16.30048 10.53307,-29.51462 23.52627,-29.51462 12.9932,0 23.52627,13.21414 23.52627,29.51462 z";
var bigreflect2 ="m 264.47664,215.50008 c 0,13.26981 -8.41818,24.0271 -18.80254,24.0271 -10.38435,0 -18.80254,-10.75729 -18.80254,-24.0271 0,-13.2698 8.41819,-24.02709 18.80254,-24.02709 10.38436,0 18.80254,10.75729 18.80254,24.02709 z";
var smallreflect2 = "m 224.99131,230.42601 c 0,5.02644 -3.50758,9.10117 -7.8344,9.10117 -4.32681,0 -7.83439,-4.07473 -7.83439,-9.10117 0,-5.02644 3.50758,-9.10118 7.83439,-9.10118 4.32682,0 7.8344,4.07474 7.8344,9.10118 z";

var pieces = ["ear", "neck", "face", "brow1", "brow2", "iris1",
              "iris2", "pupil1", "pupil2", "bigreflect1",
              "bigreflect2", "smallreflect1", "smallreflect2", "undereye1",
              "undereye2", "nose", "mouth", "lash1", "lash2", "bangs","hair" ];

var skinColor = "#ffccaa";
var hairColor = "#ffff00";
var eyeColor = "#87cdde";

 darken = function(origColor) {
    var eps = 0.3;
    var c = Raphael.color(origColor);
    if (c.v - eps < 1) {
      var value = c.v - eps;
    } else {
      var value = 1;
    }
    var newColor = Raphael.hsb2rgb(c.h, c.s, value);
    return newColor.hex;
  }

var colors = {"hair":hairColor,
              "bangs":hairColor,
              "face":skinColor,
              "ear":skinColor,
              "neck":skinColor,
              "brow1":"black",//darken(hairColor),//"black",
              "lash1":"black",
              "undereye1":"black",
              "pupil1":"black",
              "iris1":eyeColor,
              "bigreflect1":"white",
              "smallreflect1":"white",
              "brow2":"black",//darken(hairColor),//"black",
              "lash2":"black",
              "undereye2":"black",
              "pupil2":"black",
              "iris2":eyeColor,
              "bigreflect2":"white",
              "smallreflect2":"white",
              "mouth":"white",
              "nose":""};

var content = { "neck": neck,
                "ear": ear,
                "face": face,
                "iris1": "m 84.63268,195.37637 c -12.371256,23.40828 -0.02489" + 
                         ",52.11024 16.29554,56.06323 l 26.57005,-2.72809 c 1" + 
                         "9.24388,-12.36012 21.1725,-42.38477 6.52102,-60.256" + 
                         "55 l -34.344576,-4 z",
                "pupil1": "m 134.79588,216.12703 c 0,16.30049 -10.53307,29.51" + 
                          "463 -23.52627,29.51463 -12.993202,0 -23.526266,-13" + 
                          ".21414 -23.526266,-29.51463 0,-16.30048 10.533064," + 
                          "-29.51462 23.526266,-29.51462 12.9932,0 23.52627,1" + 
                          "3.21414 23.52627,29.51462 z",
                "iris2": "m 257.74383,188.23092 c 13.84828,23.71721 9.94978,5" + 
                         "3.5846 -13.24529,63.25993 l -22.42361,-2.10677 c -2" + 
                         "3.05226,-10.61876 -25.2507,-51.11621 -11.03142,-62." + 
                         "77127 l 24.3801,-1.09619 z",
                "bigreflect1": "m 139.7868,215.50037 c 0,13.26981 -8.41818,24" + 
                               ".0271 -18.80254,24.0271 -10.38435,0 -18.80254" + 
                               ",-10.75729 -18.80254,-24.0271 0,-13.2698 8.41" + 
                               "819,-24.02709 18.80254,-24.02709 10.38436,0 1" + 
                               "8.80254,10.75729 18.80254,24.02709 z",
                "smallreflect1": "m 100.30147,230.4263 c 0,5.02644 -3.507581," + 
                                 "9.10117 -7.834397,9.10117 -4.326816,0 -7.83" + 
                                 "4393,-4.07473 -7.834393,-9.10117 0,-5.02644" + 
                                 " 3.507577,-9.10118 7.834393,-9.10118 4.3268" + 
                                 "16,0 7.834397,4.07474 7.834397,9.10118 z",
                "pupil2": "m 259.48572,216.12673 c 0,16.30049 -10.53307,29.51" + 
                          "463 -23.52627,29.51463 -12.9932,0 -23.52627,-13.21" + 
                          "414 -23.52627,-29.51463 0,-16.30048 10.53307,-29.5" + 
                          "1462 23.52627,-29.51462 12.9932,0 23.52627,13.2141" + 
                          "4 23.52627,29.51462 z",
                "bigreflect2": "m 264.47664,215.50008 c 0,13.26981 -8.41818,2" + 
                               "4.0271 -18.80254,24.0271 -10.38435,0 -18.8025" + 
                               "4,-10.75729 -18.80254,-24.0271 0,-13.2698 8.4" + 
                               "1819,-24.02709 18.80254,-24.02709 10.38436,0 " + 
                               "18.80254,10.75729 18.80254,24.02709 z",
                "smallreflect2": "m 224.99131,230.42601 c 0,5.02644 -3.50758," + 
                                 "9.10117 -7.8344,9.10117 -4.32681,0 -7.83439" + 
                                 ",-4.07473 -7.83439,-9.10117 0,-5.02644 3.50" + 
                                 "758,-9.10118 7.83439,-9.10118 4.32682,0 7.8" + 
                                 "344,4.07474 7.8344,9.10118 z",
                "mouth": "m 134.67262,297.5 c 18.74334,2.00046 22.98806,2.358" + 
                         "26 46.22038,2.5 30.69859,-1.24252 20.48694,0.5 44.7" + 
                         "3041,-2 -9.85482,11.35286 -23.51408,16.05767 -43.54" + 
                         "969,15.74695 -22.27285,-0.34542 -35.92664,-5.61192 " + 
                         "-47.4011,-16.24695 z",
                "undereye1": "m 81.988931,236.07538 10.094344,11.75377 43.533" + 
                             "325,0.51016 -48.592211,5.3531 z",
                "undereye2": "m 263.37716,236.07545 -10.09434,11.75377 -43.53" + 
                             "332,0.51016 48.59221,5.3531 z",
                "nose": "m 172.5,223.5 c 1.00595,3.71403 -0.55244,30.8698 -5," + 
                        "37.5 6.3912,-0.16429 18,-0.5 18,-0.5",
                "lash1": "m 66.619926,208.28882 -0.0015,-0.006 0.0017,-0.004 " + 
                         "-0.0024,0.007 0.0011,9.1e-4 -0.0029,9.6e-4 c 26.953" + 
                         "184,-51.91534 62.573524,-29.28811 87.443684,-14.439" + 
                         "24 -33.0961,-13.8582 -62.383443,-5.51771 -87.439053" + 
                         ",14.43252 z",
                "lash2": "m 279.18602,207.99296 0.005,-0.0348 0.0155,0.0248 -" + 
                         "0.0209,-0.001 0.007,0.0188 -0.0203,0.0279 c -27.812" + 
                         "9,-51.45989 -64.2896,-31.26522 -88.90938,-16.00479 " + 
                         "32.86104,-14.40669 67.58219,-5.37706 88.9161,15.947" + 
                         " l 0.002,0.061 z",
                "brow2": "m 200.17216,174.19113 c 1.20529,-9.59591 1.07225,-1" + 
                         "7.51738 1.98643,-21.23186 21.13077,-0.83458 69.952," + 
                         "11.08823 79.66924,29.56837 -25.75906,-14.38265 -70." + 
                         "32808,-13.31545 -81.65567,-8.33651 z",
                "brow1": "m 143.57977,173.5094 c 0.33526,-2.2585 0.40033,-21." + 
                         "08641 -0.18394,-22.44512 -22.68542,-1.95899 -69.515" + 
                         "41,11.69732 -87.2299,27.50497 19.57792,-5.81705 62." + 
                         "24633,-17.17996 87.41384,-5.05985 z",
                "hair": hair };

var scared = { "neck": neck,
               "ear": ear,
               "face": face,
               "iris1": "m 81.00834,198.6289 c -10.31746,27.57295 9.95906,53." + 
                        "76652 27.20675,53.89034 l 11.30773,2.08348 c 32.2254" + 
                        "2,-16.45621 23.38666,-68.06997 9.55908,-73.77258 l -" + 
                        "39.16078,2.96174 z",
               "pupil1": "m 134.79588,216.12703 c 0,16.30049 -10.53307,29.514" + 
                         "63 -23.52627,29.51463 -12.993202,0 -23.526266,-13.2" + 
                         "1414 -23.526266,-29.51463 0,-16.30048 10.533064,-29" + 
                         ".51462 23.526266,-29.51462 12.9932,0 23.52627,13.21" + 
                         "414 23.52627,29.51462 z",
               "iris2": "m 263.38166,198.6289 c 10.31746,27.57295 -9.95906,53" + 
                        ".76652 -27.20675,53.89034 l -11.30773,2.08348 c -32." + 
                        "22542,-16.45621 -23.38666,-68.06997 -9.55908,-73.772" + 
                        "58 l 31.16078,-3.03826 z",
               "bigreflect1": "m 139.7868,215.50037 c 0,13.26981 -8.41818,24." + 
                              "0271 -18.80254,24.0271 -10.38435,0 -18.80254,-" + 
                              "10.75729 -18.80254,-24.0271 0,-13.2698 8.41819" + 
                              ",-24.02709 18.80254,-24.02709 10.38436,0 18.80" + 
                              "254,10.75729 18.80254,24.02709 z",
               "smallreflect1": "m 100.30147,230.4263 c 0,5.02644 -3.507581,9" + 
                                ".10117 -7.834397,9.10117 -4.326816,0 -7.8343" + 
                                "93,-4.07473 -7.834393,-9.10117 0,-5.02644 3." + 
                                "507577,-9.10118 7.834393,-9.10118 4.326816,0" + 
                                " 7.834397,4.07474 7.834397,9.10118 z",
               "pupil2": "m 259.48572,216.12673 c 0,16.30049 -10.53307,29.514" + 
                         "63 -23.52627,29.51463 -12.9932,0 -23.52627,-13.2141" + 
                         "4 -23.52627,-29.51463 0,-16.30048 10.53307,-29.5146" + 
                         "2 23.52627,-29.51462 12.9932,0 23.52627,13.21414 23" + 
                         ".52627,29.51462 z",
               "bigreflect2": "m 264.47664,215.50008 c 0,13.26981 -8.41818,24" + 
                              ".0271 -18.80254,24.0271 -10.38435,0 -18.80254," + 
                              "-10.75729 -18.80254,-24.0271 0,-13.2698 8.4181" + 
                              "9,-24.02709 18.80254,-24.02709 10.38436,0 18.8" + 
                              "0254,10.75729 18.80254,24.02709 z",
               "smallreflect2": "m 224.99131,230.42601 c 0,5.02644 -3.50758,9" + 
                                ".10117 -7.8344,9.10117 -4.32681,0 -7.83439,-" + 
                                "4.07473 -7.83439,-9.10117 0,-5.02644 3.50758" + 
                                ",-9.10118 7.83439,-9.10118 4.32682,0 7.8344," + 
                                "4.07474 7.8344,9.10118 z",
               "mouth": "m 113.17262,286.74055 c 11.42174,-24.22408 34.4202,-" + 
                        "9.18741 65.22038,-9.9055 33.30848,-2.03153 52.80586," + 
                        "-14.59843 65.73041,8.31972 27.74171,69.74034 -45.097" + 
                        "35,34.71619 -66.40324,35.61144 -23.46994,0.98618 -84" + 
                        ".835815,33.59304 -64.54755,-34.02566 z",
               "undereye1": "m 82.415294,239.3089 9.711872,12.07172 43.494524" + 
                            ",1.90722 -48.739002,3.79063 z",
               "undereye2": "m 263.21782,238.39556 -9.28976,12.39949 -43.4028" + 
                            "6,3.40613 48.84073,2.10746 z",
               "nose": "m 172.5,223.5 c 1.00595,3.71403 -0.55244,30.8698 -5,3" + 
                       "7.5 6.3912,-0.16429 18,-0.5 18,-0.5",
               "lash1": "m 64.586702,210.23964 -0.0021,-0.006 0.0012,-0.004 -" + 
                        "0.0016,0.007 0.0012,7.9e-4 -0.0028,7.3e-4 c 21.09558" + 
                        "6,-54.55872 58.983088,-35.97548 85.332038,-23.94439 " + 
                        "-34.41657,-10.14403 -62.612244,1.35885 -85.328172,23" + 
                        ".9372 z",
               "lash2": "m 280.9041,208.25094 0.007,-0.0343 0.0144,0.0256 -0." + 
                        "0208,-0.003 0.006,0.0192 -0.022,0.0266 c -24.56137,-" + 
                        "53.08875 -62.22251,-35.19979 -87.743,-21.49875 33.69" + 
                        "277,-12.33683 67.78572,-1.16706 87.75329,21.44148 l " + 
                        "-9.7e-4,0.0611 z",
               "brow2": "m 204.38001,147.9909 c 2.64624,-9.30224 -1.28425,-13" + 
                        ".1523 0.18254,-16.68524 21.01302,2.37881 72.46218,17" + 
                        ".56582 79.26522,37.30561 -23.28065,-18.12185 -67.496" + 
                        "24,-23.82432 -79.44776,-20.62037 z",
               "brow1": "m 138.11093,145.18888 c -0.40065,-2.24782 0.67131,-1" + 
                        "9.11827 -0.31485,-20.22052 -22.13006,5.3597 -69.1826" + 
                        "1,32.20456 -80.94789,52.82647 16.71021,-11.74316 53." + 
                        "54699,-36.08984 81.26274,-32.60595 z",
               "hair": hair };

var surprised = { "neck": neck,
                  "ear": ear,
                  "face": face,
                  "nose": "m 172.5,223.5 c 1.00595,3.71403 -0.55244,30.8698 -" + 
                          "5,37.5 6.3912,-0.16429 18,-0.5 18,-0.5",
                  "mouth": "m 146.67262,302.74055 c 3.99258,-25.605 17.26612," + 
                           "-24.34923 33.22038,-26.9055 17.9367,1.35495 32.38" + 
                           "026,12.53576 36.23041,28.81972 2.18914,30.32203 -" + 
                           "19.995,34.36785 -34.40324,34.61144 -23.32273,0.39" + 
                           "43 -40.12635,-17.44619 -35.04755,-36.52566 z",
                  "iris1": "m 88.94103,186.46747 c -16.872963,23.98216 -10.20" + 
                           "5002,56.06003 12.77041,66.18456 l 22.57006,-0.228" + 
                           "09 c 25.67541,-11.48217 26.61721,-72.88854 -5.964" + 
                           "27,-76.1101 l -16.85929,-0.14645 z",
                  "undereye1": "m 81.988931,240.07538 10.094344,11.75377 43.5" + 
                               "33325,0.51016 -48.592211,5.3531 z",
                  "iris2": "m 250.67276,180.45275 c 25.51554,24.42431 16.6673" + 
                           ",64.1912 -10.06331,71.74521 l -18.03452,0.18612 c" + 
                           " -21.28449,-10.97231 -29.63979,-49.87357 -6.22812" + 
                           ",-74.25655 l 20.34457,-3 z",
                  "undereye2": "m 263.37716,240.07545 -10.09434,11.75377 -43." + 
                               "53332,0.51016 48.59221,5.3531 z",
                  "pupil1": "m 134.79588,216.12703 c 0,16.30049 -10.53307,29." + 
                            "51463 -23.52627,29.51463 -12.993202,0 -23.526266" + 
                            ",-13.21414 -23.526266,-29.51463 0,-16.30048 10.5" + 
                            "33064,-29.51462 23.526266,-29.51462 12.9932,0 23" + 
                            ".52627,13.21414 23.52627,29.51462 z",
                  "bigreflect1": "m 139.7868,215.50037 c 0,13.26981 -8.41818," + 
                                 "24.0271 -18.80254,24.0271 -10.38435,0 -18.8" + 
                                 "0254,-10.75729 -18.80254,-24.0271 0,-13.269" + 
                                 "8 8.41819,-24.02709 18.80254,-24.02709 10.3" + 
                                 "8436,0 18.80254,10.75729 18.80254,24.02709 " + 
                                 "z",
                  "smallreflect1": "m 100.30147,230.4263 c 0,5.02644 -3.50758" + 
                                   "1,9.10117 -7.834397,9.10117 -4.326816,0 -" + 
                                   "7.834393,-4.07473 -7.834393,-9.10117 0,-5" + 
                                   ".02644 3.507577,-9.10118 7.834393,-9.1011" + 
                                   "8 4.326816,0 7.834397,4.07474 7.834397,9." + 
                                   "10118 z",
                  "pupil2": "m 259.48572,216.12673 c 0,16.30049 -10.53307,29." + 
                            "51463 -23.52627,29.51463 -12.9932,0 -23.52627,-1" + 
                            "3.21414 -23.52627,-29.51463 0,-16.30048 10.53307" + 
                            ",-29.51462 23.52627,-29.51462 12.9932,0 23.52627" + 
                            ",13.21414 23.52627,29.51462 z",
                  "bigreflect2": "m 264.47664,215.50008 c 0,13.26981 -8.41818" + 
                                 ",24.0271 -18.80254,24.0271 -10.38435,0 -18." + 
                                 "80254,-10.75729 -18.80254,-24.0271 0,-13.26" + 
                                 "98 8.41819,-24.02709 18.80254,-24.02709 10." + 
                                 "38436,0 18.80254,10.75729 18.80254,24.02709" + 
                                 " z",
                  "smallreflect2": "m 224.99131,230.42601 c 0,5.02644 -3.5075" + 
                                   "8,9.10117 -7.8344,9.10117 -4.32681,0 -7.8" + 
                                   "3439,-4.07473 -7.83439,-9.10117 0,-5.0264" + 
                                   "4 3.50758,-9.10118 7.83439,-9.10118 4.326" + 
                                   "82,0 7.8344,4.07474 7.8344,9.10118 z",
                  "lash1": "m 66.437599,204.42172 -0.0021,-0.006 0.0012,-0.00" + 
                           "4 -0.0016,0.007 0.0012,7.9e-4 -0.0028,0.001 c 20." + 
                           "932056,-54.62166 58.875051,-36.152 85.259921,-24." + 
                           "1999 -34.4468,-10.04089 -62.607885,1.5464 -85.256" + 
                           "076,24.1927 z",
                  "brow2": "m 201.52817,144.29779 c 1.88951,-9.48493 2.3242,-" + 
                           "17.39558 3.50209,-21.03504 21.13627,0.6811 68.978" + 
                           "12,16.07017 77.34673,35.19886 -24.66272,-16.19074" + 
                           " -69.19371,-18.31861 -80.84882,-14.16382 z",
                  "brow1": "m 141.12848,144.78225 c -0.0153,-2.2832 -2.84032," + 
                           "-20.89808 -3.62618,-22.15103 -22.71733,1.54551 -6" + 
                           "6.896929,22.22657 -81.975754,40.56544 18.453336,-" + 
                           "8.75257 58.872594,-26.52876 85.601934,-18.41441 z" + 
                           "",
                  "lash2": "m 278.24668,200.66078 0.005,-0.0348 0.0155,0.0248" + 
                           " -0.0209,-0.001 0.007,0.0188 -0.0203,0.0279 c -27" + 
                           ".81289,-51.45989 -64.28959,-31.26522 -88.90938,-1" + 
                           "6.00479 32.86104,-14.40669 67.58219,-5.37706 88.9" + 
                           "161,15.947 l 0.002,0.061 z",
                  "hair": hair };

var sad = { "neck": neck,
            "ear": ear,
            "face": face,
            "nose": "m 172.5,223.5 c 1.00595,3.71403 -0.55244,30.8698 -5,37.5" + 
                    " 6.3912,-0.16429 18,-0.5 18,-0.5",
            "mouth": "m 119.67262,316.24055 c -0.21453,-25.69382 31.29158,-43" + 
                     ".46467 58.22038,-43.4055 27.05669,-0.64955 59.72977,13." + 
                     "1926 63.73041,43.81972 -31.43993,1.84673 -35.77203,-2.8" + 
                     "2964 -63.90324,-2.88856 -25.24678,-0.0529 -34.40037,4.2" + 
                     "9991 -58.04755,2.47434 z",
            "iris1": "m 81.453846,200.3964 c -6.781926,22.97675 3.595099,50.2" + 
                     "3098 22.610554,53.53678 l 16.61103,1.02282 c 32.72383,-" + 
                     "20.42538 26.47012,-55.64812 10.26619,-74.83324 l -40.16" + 
                     "078,8.16885 z",
            "undereye1": "m 79.73205,234.6512 7.66012,13.46735 42.6322,8.8264" + 
                         "5 -48.71905,-4.03893 z",
            "iris2": "m 263.38166,198.6289 c 10.31746,27.57295 -9.95906,53.76" + 
                     "652 -27.20675,53.89034 l -11.30773,2.08348 c -32.22542," + 
                     "-16.45621 -23.38666,-68.06997 -9.55908,-73.77258 l 40.1" + 
                     "6078,7.46174 z",
            "undereye2": "m 266.51767,234.65147 -7.66012,13.46735 -42.6322,8." + 
                         "82645 48.71905,-4.03893 z",
            "pupil1": "m 134.79588,216.12703 c 0,16.30049 -10.53307,29.51463 " + 
                      "-23.52627,29.51463 -12.993202,0 -23.526266,-13.21414 -" + 
                      "23.526266,-29.51463 0,-16.30048 10.533064,-29.51462 23" + 
                      ".526266,-29.51462 12.9932,0 23.52627,13.21414 23.52627" + 
                      ",29.51462 z",
            "bigreflect1": "m 139.7868,215.50037 c 0,13.26981 -8.41818,24.027" + 
                           "1 -18.80254,24.0271 -10.38435,0 -18.80254,-10.757" + 
                           "29 -18.80254,-24.0271 0,-13.2698 8.41819,-24.0270" + 
                           "9 18.80254,-24.02709 10.38436,0 18.80254,10.75729" + 
                           " 18.80254,24.02709 z",
            "smallreflect1": "m 100.30147,230.4263 c 0,5.02644 -3.507581,9.10" + 
                             "117 -7.834397,9.10117 -4.326816,0 -7.834393,-4." + 
                             "07473 -7.834393,-9.10117 0,-5.02644 3.507577,-9" + 
                             ".10118 7.834393,-9.10118 4.326816,0 7.834397,4." + 
                             "07474 7.834397,9.10118 z",
            "pupil2": "m 259.48572,216.12673 c 0,16.30049 -10.53307,29.51463 " + 
                      "-23.52627,29.51463 -12.9932,0 -23.52627,-13.21414 -23." + 
                      "52627,-29.51463 0,-16.30048 10.53307,-29.51462 23.5262" + 
                      "7,-29.51462 12.9932,0 23.52627,13.21414 23.52627,29.51" + 
                      "462 z",
            "bigreflect2": "m 264.47664,215.50008 c 0,13.26981 -8.41818,24.02" + 
                           "71 -18.80254,24.0271 -10.38435,0 -18.80254,-10.75" + 
                           "729 -18.80254,-24.0271 0,-13.2698 8.41819,-24.027" + 
                           "09 18.80254,-24.02709 10.38436,0 18.80254,10.7572" + 
                           "9 18.80254,24.02709 z",
            "smallreflect2": "m 224.99131,230.42601 c 0,5.02644 -3.50758,9.10" + 
                             "117 -7.8344,9.10117 -4.32681,0 -7.83439,-4.0747" + 
                             "3 -7.83439,-9.10117 0,-5.02644 3.50758,-9.10118" + 
                             " 7.83439,-9.10118 4.32682,0 7.8344,4.07474 7.83" + 
                             "44,9.10118 z",
            "lash1": "m 68.397851,225.48502 -0.0036,-0.005 2.9e-5,-0.004 2.9e" + 
                     "-4,0.007 0.0013,4.5e-4 -0.0025,10e-4 c 5.876001,-58.199" + 
                     "22 47.33451,-50.32577 75.93026,-45.71089 -35.87437,-0.6" + 
                     "5645 -60.011402,17.91007 -75.928437,45.70293 z",
            "brow1": "m 130.1582,160.40035 c -0.40819,-2.24646 3.50339,-19.74" + 
                     "338 2.51355,-20.84231 -32.95817,-9.77523 -81.733879,21." + 
                     "76215 -74.666523,52.72051 5.789191,-17.34565 35.701102," + 
                     "-46.00712 72.152973,-31.8782 z",
            "lash2": "m 276.47731,220.81778 0.0143,-0.032 0.008,0.0281 -0.019" + 
                     "8,-0.006 0.001,0.0199 -0.0273,0.0211 c -12.22613,-57.20" + 
                     "313 -52.90876,-48.07627 -80.82553,-40.35175 35.58576,-4" + 
                     ".58861 66.3687,13.837 80.84823,40.29818 l -0.0144,0.059" + 
                     "2 z",
            "brow2": "m 209.98923,157.6237 c 1.68036,-7.84888 1.51829,-15.662" + 
                     "87 3.68252,-18.81711 28.471,-12.72348 72.84018,18.7465 " + 
                     "63.04308,50.26629 -17.07743,-42.16451 -52.69761,-39.811" + 
                     "73 -66.7256,-31.44918 z",
            "hair": hair };

var neutral = { "neck": neck,
                "ear": ear,
                "face": face,
                "nose": "m 172.5,223.5 c 1.00595,3.71403 -0.55244,30.8698 -5," + 
                        "37.5 6.3912,-0.16429 18,-0.5 18,-0.5",
                "mouth": "m 143.67262,305.24055 35.72038,0.5945 41.23041,0.31" + 
                         "972 c -27.18612,0.54301 -18.82759,0.70304 -40.90324" + 
                         ",-0.38856 -20.22792,-1.00023 -20.934,-0.33733 -36.0" + 
                         "4755,-0.52566 z",
                "iris1": "m 88.94103,186.46747 c -16.872963,23.98216 -10.2050" + 
                         "02,56.06003 12.77041,66.18456 l 22.57006,-0.22809 c" + 
                         " 25.67541,-11.48217 27.32432,-70.06011 -5.25716,-73" + 
                         ".28167 l -17.5664,0.56065 z",
                "undereye1": "m 80.41675,237.81939 9.618204,12.14648 43.47846" + 
                             "6,2.24362 -48.766861,3.41351 z",
                "iris2": "m 252.44053,182.92762 c 25.51554,24.42431 14.89953," + 
                         "61.71633 -11.83108,69.27034 l -18.03452,0.18612 c -" + 
                         "21.28449,-10.97231 -27.16492,-49.87357 -8.34944,-69" + 
                         ".66036 l 22.81944,-4.06066 z",
                "undereye2": "m 264.95719,237.93356 -9.80248,11.99824 -43.507" + 
                             "65,1.5797 48.70908,4.1575 z",
                "pupil1": "m 134.79588,216.12703 c 0,16.30049 -10.53307,29.51" + 
                          "463 -23.52627,29.51463 -12.993202,0 -23.526266,-13" + 
                          ".21414 -23.526266,-29.51463 0,-16.30048 10.533064," + 
                          "-29.51462 23.526266,-29.51462 12.9932,0 23.52627,1" + 
                          "3.21414 23.52627,29.51462 z",
                "bigreflect1": "m 139.7868,215.50037 c 0,13.26981 -8.41818,24" + 
                               ".0271 -18.80254,24.0271 -10.38435,0 -18.80254" + 
                               ",-10.75729 -18.80254,-24.0271 0,-13.2698 8.41" + 
                               "819,-24.02709 18.80254,-24.02709 10.38436,0 1" + 
                               "8.80254,10.75729 18.80254,24.02709 z",
                "smallreflect1": "m 100.30147,230.4263 c 0,5.02644 -3.507581," + 
                                 "9.10117 -7.834397,9.10117 -4.326816,0 -7.83" + 
                                 "4393,-4.07473 -7.834393,-9.10117 0,-5.02644" + 
                                 " 3.507577,-9.10118 7.834393,-9.10118 4.3268" + 
                                 "16,0 7.834397,4.07474 7.834397,9.10118 z",
                "pupil2": "m 259.48572,216.12673 c 0,16.30049 -10.53307,29.51" + 
                          "463 -23.52627,29.51463 -12.9932,0 -23.52627,-13.21" + 
                          "414 -23.52627,-29.51463 0,-16.30048 10.53307,-29.5" + 
                          "1462 23.52627,-29.51462 12.9932,0 23.52627,13.2141" + 
                          "4 23.52627,29.51462 z",
                "bigreflect2": "m 264.47664,215.50008 c 0,13.26981 -8.41818,2" + 
                               "4.0271 -18.80254,24.0271 -10.38435,0 -18.8025" + 
                               "4,-10.75729 -18.80254,-24.0271 0,-13.2698 8.4" + 
                               "1819,-24.02709 18.80254,-24.02709 10.38436,0 " + 
                               "18.80254,10.75729 18.80254,24.02709 z",
                "smallreflect2": "m 224.99131,230.42601 c 0,5.02644 -3.50758," + 
                                 "9.10117 -7.8344,9.10117 -4.32681,0 -7.83439" + 
                                 ",-4.07473 -7.83439,-9.10117 0,-5.02644 3.50" + 
                                 "758,-9.10118 7.83439,-9.10118 4.32682,0 7.8" + 
                                 "344,4.07474 7.8344,9.10118 z",
                "brow2": "m 198.98036,171.55842 c 1.20529,-9.59591 1.07225,-1" + 
                         "7.51738 1.98643,-21.23186 21.13077,-0.83458 69.952," + 
                         "11.08823 79.66924,29.56837 -25.75906,-14.38265 -70." + 
                         "32808,-13.31545 -81.65567,-8.33651 z",
                "brow1": "m 146.57977,171.5094 c 0.33526,-2.2585 0.40033,-21." + 
                         "08641 -0.18394,-22.44512 -22.68542,-1.95899 -69.515" + 
                         "41,11.69732 -87.2299,27.50497 19.57792,-5.81705 62." + 
                         "24633,-17.17996 87.41384,-5.05985 z",
                "lash1": "m 68.84738,203.25188 -0.001,-0.006 0.002,-0.004 -0." + 
                         "003,0.007 10e-4,10e-4 -0.003,7.2e-4 c 30.98453,-49." + 
                         "61487 64.69869,-24.23466 88.31324,-7.46066 -31.8931" + 
                         "4,-16.43865 -61.74957,-10.44652 -88.30809,7.45433 z" + 
                         "",
                "hair": hair,
                "lash2": "m 280.05867,202.8167 10e-4,-0.0351 0.0181,0.023 -0." + 
                         "0209,0.001 0.009,0.0179 -0.0171,0.0299 c -33.27484," + 
                         "-48.10886 -67.32373,-24.04543 -90.12655,-6.18358 31" + 
                         ".08802,-17.91469 66.58852,-12.73714 90.1269,6.1254 " + 
                         "l 0.009,0.0604 z" };

var happy = { "neck": neck,
              "ear": ear,
              "face": face,
              "nose": "m 172.5,223.5 c 1.00595,3.71403 -0.55244,30.8698 -5,37" + 
                      ".5 6.3912,-0.16429 18,-0.5 18,-0.5",
              "mouth": "m 116.67262,265.24055 62.22038,4.5945 62.23041,-3.180" + 
                       "28 c -8.68612,53.54301 -37.32759,73.70304 -59.40324,7" + 
                       "2.61144 -20.22792,-1.00023 -54.934,-20.83733 -65.0475" + 
                       "5,-74.02566 z",
              "iris1": "m 84.63268,195.37637 c -12.371256,23.40828 -0.02489,5" + 
                       "2.11024 16.29554,56.06323 l 25.07005,-0.72809 c 19.24" + 
                       "388,-12.36012 22.1725,-48.38477 7.52102,-66.25655 l -" + 
                       "33.844576,0 z",
              "undereye1": "m 81.988931,238.07538 10.094344,11.75377 43.53332" + 
                           "5,0.51016 -48.592211,5.3531 z",
              "iris2": "m 257.74383,188.23092 c 13.84828,23.71721 9.94978,53." + 
                       "5846 -13.24529,63.25993 l -21.92361,0.89323 c -23.052" + 
                       "26,-10.61876 -25.7507,-54.11621 -11.53142,-65.77127 l" + 
                       " 23.8801,-7.59619 z",
              "undereye2": "m 263.37716,238.07545 -10.09434,11.75377 -43.5333" + 
                           "2,0.51016 48.59221,5.3531 z",
              "pupil1": "m 134.79588,216.12703 c 0,16.30049 -10.53307,29.5146" + 
                        "3 -23.52627,29.51463 -12.993202,0 -23.526266,-13.214" + 
                        "14 -23.526266,-29.51463 0,-16.30048 10.533064,-29.51" + 
                        "462 23.526266,-29.51462 12.9932,0 23.52627,13.21414 " + 
                        "23.52627,29.51462 z",
              "bigreflect1": "m 139.7868,215.50037 c 0,13.26981 -8.41818,24.0" + 
                             "271 -18.80254,24.0271 -10.38435,0 -18.80254,-10" + 
                             ".75729 -18.80254,-24.0271 0,-13.2698 8.41819,-2" + 
                             "4.02709 18.80254,-24.02709 10.38436,0 18.80254," + 
                             "10.75729 18.80254,24.02709 z",
              "smallreflect1": "m 100.30147,230.4263 c 0,5.02644 -3.507581,9." + 
                               "10117 -7.834397,9.10117 -4.326816,0 -7.834393" + 
                               ",-4.07473 -7.834393,-9.10117 0,-5.02644 3.507" + 
                               "577,-9.10118 7.834393,-9.10118 4.326816,0 7.8" + 
                               "34397,4.07474 7.834397,9.10118 z",
              "pupil2": "m 259.48572,216.12673 c 0,16.30049 -10.53307,29.5146" + 
                        "3 -23.52627,29.51463 -12.9932,0 -23.52627,-13.21414 " + 
                        "-23.52627,-29.51463 0,-16.30048 10.53307,-29.51462 2" + 
                        "3.52627,-29.51462 12.9932,0 23.52627,13.21414 23.526" + 
                        "27,29.51462 z",
              "bigreflect2": "m 264.47664,215.50008 c 0,13.26981 -8.41818,24." + 
                             "0271 -18.80254,24.0271 -10.38435,0 -18.80254,-1" + 
                             "0.75729 -18.80254,-24.0271 0,-13.2698 8.41819,-" + 
                             "24.02709 18.80254,-24.02709 10.38436,0 18.80254" + 
                             ",10.75729 18.80254,24.02709 z",
              "smallreflect2": "m 224.99131,230.42601 c 0,5.02644 -3.50758,9." + 
                               "10117 -7.8344,9.10117 -4.32681,0 -7.83439,-4." + 
                               "07473 -7.83439,-9.10117 0,-5.02644 3.50758,-9" + 
                               ".10118 7.83439,-9.10118 4.32682,0 7.8344,4.07" + 
                               "474 7.8344,9.10118 z",
              "lash1": "m 67.45995,207.12727 -0.0016,-0.006 0.0016,-0.004 -0." + 
                       "0023,0.007 0.0011,9.1e-4 -0.0029,7.9e-4 c 26.3872,-52" + 
                       ".2055 62.25147,-29.96693 87.28161,-15.38934 -33.24483" + 
                       ",-13.49752 -62.439749,-4.83907 -87.276953,15.38241 z",
              "lash2": "m 278.729,201.20179 0.001,-0.0351 0.0179,0.0232 -0.02" + 
                       "09,7.8e-4 0.009,0.018 -0.0174,0.0298 c -32.77628,-48." + 
                       "44991 -67.07183,-24.73937 -90.0579,-7.11395 31.27136," + 
                       "-17.5927 66.7165,-12.04883 90.05885,7.05578 l 0.008,0" + 
                       ".0605 z",
              "brow2": "m 202.48036,165.05842 c 1.20529,-9.59591 1.07225,-17." + 
                       "51738 1.98643,-21.23186 21.13077,-0.83458 69.952,11.0" + 
                       "8823 79.66924,29.56837 -25.75906,-14.38265 -70.32808," + 
                       "-13.31545 -81.65567,-8.33651 z",
              "brow1": "m 137.57977,166.5094 c 0.33526,-2.2585 0.40033,-21.08" + 
                       "641 -0.18394,-22.44512 -22.68542,-1.95899 -69.51541,1" + 
                       "1.69732 -87.2299,27.50497 19.57792,-5.81705 62.24633," + 
                       "-17.17996 87.41384,-5.05985 z",
              "hair": hair };

var disgusted = { "neck": neck,
                  "ear": ear,
                  "face": face,
                  "iris1": "m 81.00834,198.6289 c -10.31746,27.57295 6.777079" + 
                           ",43.18809 22.27477,47.31191 l 20.67169,-0.49494 c" + 
                           " 25.87923,-11.37779 20.66179,-49.19561 6.83421,-5" + 
                           "4.89822 l -38.74657,-1.45247 z",
                  "pupil1": "m 134.79588,216.12703 c 0,16.30049 -10.53307,29." + 
                            "51463 -23.52627,29.51463 -12.993202,0 -23.526266" + 
                            ",-13.21414 -23.526266,-29.51463 0,-16.30048 10.5" + 
                            "33064,-29.51462 23.526266,-29.51462 12.9932,0 23" + 
                            ".52627,13.21414 23.52627,29.51462 z",
                  "iris2": "m 263.70396,198.6289 c 10.31746,27.57295 -6.77708" + 
                           ",45.43809 -23.27477,47.81191 l -20.17169,-0.24494" + 
                           " c -24.12923,-9.62779 -19.16179,-50.44561 -5.3342" + 
                           "1,-56.14822 l 37.74657,-0.95247 z",
                  "bigreflect1": "m 139.7868,215.50037 c 0,13.26981 -8.41818," + 
                                 "24.0271 -18.80254,24.0271 -10.38435,0 -18.8" + 
                                 "0254,-10.75729 -18.80254,-24.0271 0,-13.269" + 
                                 "8 8.41819,-24.02709 18.80254,-24.02709 10.3" + 
                                 "8436,0 18.80254,10.75729 18.80254,24.02709 " + 
                                 "z",
                  "smallreflect1": "m 100.30147,230.4263 c 0,5.02644 -3.50758" + 
                                   "1,9.10117 -7.834397,9.10117 -4.326816,0 -" + 
                                   "7.834393,-4.07473 -7.834393,-9.10117 0,-5" + 
                                   ".02644 3.507577,-9.10118 7.834393,-9.1011" + 
                                   "8 4.326816,0 7.834397,4.07474 7.834397,9." + 
                                   "10118 z",
                  "pupil2": "m 259.48572,216.12673 c 0,16.30049 -10.53307,29." + 
                            "51463 -23.52627,29.51463 -12.9932,0 -23.52627,-1" + 
                            "3.21414 -23.52627,-29.51463 0,-16.30048 10.53307" + 
                            ",-29.51462 23.52627,-29.51462 12.9932,0 23.52627" + 
                            ",13.21414 23.52627,29.51462 z",
                  "bigreflect2": "m 264.47664,215.50008 c 0,13.26981 -8.41818" + 
                                 ",24.0271 -18.80254,24.0271 -10.38435,0 -18." + 
                                 "80254,-10.75729 -18.80254,-24.0271 0,-13.26" + 
                                 "98 8.41819,-24.02709 18.80254,-24.02709 10." + 
                                 "38436,0 18.80254,10.75729 18.80254,24.02709" + 
                                 " z",
                  "smallreflect2": "m 224.99131,230.42601 c 0,5.02644 -3.5075" + 
                                   "8,9.10117 -7.8344,9.10117 -4.32681,0 -7.8" + 
                                   "3439,-4.07473 -7.83439,-9.10117 0,-5.0264" + 
                                   "4 3.50758,-9.10118 7.83439,-9.10118 4.326" + 
                                   "82,0 7.8344,4.07474 7.8344,9.10118 z",
                  "nose": "m 172.5,219.5 c 1.00595,3.71403 -3.05244,19.8698 -" + 
                          "7.5,26.5 6.3912,-0.16429 15,10.5 15,10.5",
                  "mouth": "m 112.67262,320.24055 c 13.90424,-22.98283 49.765" + 
                           "87,-38.26457 77.72038,-40.4055 33.30848,-2.03153 " + 
                           "53.30586,16.90157 51.73041,42.31972 -16.80472,-14" + 
                           ".09968 -31.90713,-15.67976 -42.90324,-15.88856 -2" + 
                           "6.99005,-0.5125 -29.3703,13.19681 -86.54755,13.97" + 
                           "434 z",
                  "undereye1": "m 82.415294,231.3089 9.711872,12.07172 43.494" + 
                               "524,1.90722 -48.739002,3.79063 z",
                  "undereye2": "m 262.29701,231.3089 -9.71187,12.07172 -43.49" + 
                               "453,1.90722 48.73901,3.79063 z",
                  "lash1": "m 64.84738,210.25188 -0.001,-0.006 0.002,-0.004 -" + 
                           "0.003,0.007 10e-4,10e-4 -0.003,7.2e-4 c 35.21795," + 
                           "-43.26474 68.68837,-27.75014 88.31324,-7.46066 -3" + 
                           "1.05743,-19.36364 -60.704581,-14.10398 -88.30809," + 
                           "7.45433 z",
                  "lash2": "m 282.09239,214.00928 0.005,-0.0347 0.0153,0.025 " + 
                           "-0.0209,-0.001 0.007,0.0188 -0.0205,0.0277 c -27." + 
                           "39656,-51.68274 -64.03512,-31.78319 -88.77729,-16" + 
                           ".722 32.97628,-14.14095 67.6234,-4.83132 88.78447" + 
                           ",16.66426 l 0.002,0.061 z",
                  "brow2": "m 189.56158,180.44609 c 0.0365,-9.67124 0.008,-12" + 
                           ".74038 0.46611,-16.53813 20.90661,7.59474 47.9585" + 
                           "2,-19.18374 82.09851,19.44332 -29.66895,-12.5293 " + 
                           "-69.37765,-2.93036 -82.56462,-2.90519 z",
                  "brow1": "m 152.66417,184.46329 c 1.83526,-4.7585 0.25385,-" + 
                           "19.25798 -0.33039,-20.61669 -35.31233,11.99643 -4" + 
                           "9.58331,-13.16931 -86.583454,25.17654 24.26275,-5" + 
                           ".06186 59.931464,-16.5639 86.913844,-4.55985 z",
                  "hair": hair };

var disappointed = { "neck": neck,
                     "ear": ear,
                     "face": face,
                     "nose": "m 172.5,223.5 c 1.00595,3.71403 -0.55244,30.869" + 
                             "8 -5,37.5 6.3912,-0.16429 18,-0.5 18,-0.5",
                     "iris2": "m 250.31921,192.46316 c 27.99041,13.81771 17.0" + 
                              "2085,52.18079 -9.70976,59.7348 l -18.03452,0.1" + 
                              "8612 c -21.28449,-8.49744 -25.8469,-39.03474 -" + 
                              "10.67787,-59.67507 l 25.29432,-3.82843 z",
                     "mouth": "m 149.58683,315.6903 c 8.18229,-9.16566 13.661" + 
                              "55,-13.27753 22.80617,-14.60525 5.34419,-0.834" + 
                              "39 18.88026,-1.2142 32.73041,-0.43028 -13.2704" + 
                              "1,-0.506 -24.3936,-0.9895 -32.5889,0.365 -9.53" + 
                              "809,1.57643 -14.3938,5.35616 -23.09412,14.6704" + 
                              "1 z",
                     "iris1": "m 88.026816,200.36696 c -16.165856,16.9111 -9." + 
                              "290788,42.16054 13.684624,52.28507 l 20.57006," + 
                              "0.77191 c 24.67541,-4.48217 26.14234,-51.736 5" + 
                              ".93523,-59.20019 l -23.19813,3.29288 z",
                     "pupil1": "m 134.79588,226.12703 c 0,16.30049 -10.03307," + 
                               "28.01463 -23.02627,28.01463 -12.993202,0 -24." + 
                               "026266,-11.71414 -24.026266,-28.01463 0,-16.3" + 
                               "0048 10.533064,-29.51462 23.526266,-29.51462 " + 
                               "12.9932,0 23.52627,13.21414 23.52627,29.51462" + 
                               " z",
                     "bigreflect1": "m 139.7868,223.50037 c 0,13.26981 -8.418" + 
                                    "18,24.0271 -18.80254,24.0271 -10.38435,0" + 
                                    " -18.80254,-10.75729 -18.80254,-24.0271 " + 
                                    "0,-13.2698 8.41819,-24.02709 18.80254,-2" + 
                                    "4.02709 10.38436,0 18.80254,10.75729 18." + 
                                    "80254,24.02709 z",
                     "smallreflect1": "m 100.30147,238.4263 c 0,5.02644 -3.50" + 
                                      "7581,9.10117 -7.834397,9.10117 -4.3268" + 
                                      "16,0 -7.834393,-4.07473 -7.834393,-9.1" + 
                                      "0117 0,-5.02644 3.507577,-9.10118 7.83" + 
                                      "4393,-9.10118 4.326816,0 7.834397,4.07" + 
                                      "474 7.834397,9.10118 z",
                     "pupil2": "m 259.48572,226.12673 c 0,16.30049 -10.03307," + 
                               "28.01463 -23.02627,28.01463 -12.9932,0 -24.02" + 
                               "627,-11.71414 -24.02627,-28.01463 0,-16.30048" + 
                               " 10.53307,-29.51462 23.52627,-29.51462 12.993" + 
                               "2,0 23.52627,13.21414 23.52627,29.51462 z",
                     "bigreflect2": "m 264.47664,223.50008 c 0,13.26981 -8.41" + 
                                    "818,24.0271 -18.80254,24.0271 -10.38435," + 
                                    "0 -18.80254,-10.75729 -18.80254,-24.0271" + 
                                    " 0,-13.2698 8.41819,-24.02709 18.80254,-" + 
                                    "24.02709 10.38436,0 18.80254,10.75729 18" + 
                                    ".80254,24.02709 z",
                     "smallreflect2": "m 224.99131,238.42601 c 0,5.02644 -3.5" + 
                                      "0758,9.10117 -7.8344,9.10117 -4.32681," + 
                                      "0 -7.83439,-4.07473 -7.83439,-9.10117 " + 
                                      "0,-5.02644 3.50758,-9.10118 7.83439,-9" + 
                                      ".10118 4.32682,0 7.8344,4.07474 7.8344" + 
                                      ",9.10118 z",
                     "undereye1": "m 83.66192,239.10901 9.532927,12.21351 43." + 
                                  "461693,2.54796 -48.789564,3.072 z",
                     "undereye2": "m 262.39933,238.71951 -9.45394,12.27478 -4" + 
                                  "3.44434,2.82826 48.80836,2.75717 z",
                     "brow2": "m 191.38093,193.89838 c -2.18982,-9.42014 -5.0" + 
                              "5584,-16.80615 -5.48353,-20.6075 15.52727,-20." + 
                              "12275 68.56419,-16.5126 84.97908,0.17221 -35.8" + 
                              "1977,-7.27368 -70.24324,-3.19646 -79.49555,20." + 
                              "43529 z",
                     "brow1": "m 154.12182,194.15483 c 0.66673,-2.18372 3.525" + 
                              "36,-20.79348 3.14919,-22.22386 -15.36159,-23.3" + 
                              "8905 -70.155357,0.38099 -90.34593,14.25449 20." + 
                              "94091,-4.75768 70.52316,-24.86223 87.19674,7.9" + 
                              "6937 z",
                     "lash1": "m 67.84738,216.25188 -0.001,-0.006 0.002,-0.00" + 
                              "4 -0.003,0.007 10e-4,10e-4 -0.003,7.2e-4 c 30." + 
                              "98453,-49.61487 64.69869,-24.23466 88.31324,-7" + 
                              ".46066 -31.89314,-16.43865 -61.74957,-10.44652" + 
                              " -88.30809,7.45433 z",
                     "lash2": "m 275.93365,207.11657 -0.003,-0.035 0.0207,0.0" + 
                              "207 -0.0206,0.003 0.011,0.0167 -0.0135,0.0317 " + 
                              "c -38.68195,-43.87922 -69.67717,-15.99247 -90." + 
                              "23034,4.41787 28.77512,-21.43347 64.63773,-20." + 
                              "45068 90.22386,-4.47569 l 0.016,0.0589 z",
                     "hair": hair };

var angry = { "neck": neck,
              "ear": ear,
              "face": face,
              "nose": "m 172.5,223.5 c 1.00595,3.71403 -0.55244,30.8698 -5,37" + 
                      ".5 6.3912,-0.16429 18,-0.5 18,-0.5",
              "mouth": "m 134.67262,284.24055 c 8.15881,-0.6623 21.03041,1.66" + 
                       "294 37.22038,0.5945 14.60154,0.5706 30.26907,0.45135 " + 
                       "39.23041,-1.68028 24.51927,56.57986 12.38502,57.94046" + 
                       " -29.90324,59.11144 -48.49295,1.34279 -64.09468,1.011" + 
                       "27 -46.54755,-58.02566 z",
              "iris1": "m 87.59959,188.23092 c -13.84828,23.71721 -9.94978,53" + 
                       ".5846 13.24529,63.25993 l 21.92361,0.89323 c 17.55226" + 
                       ",-9.11876 22.2507,-29.61621 18.03142,-46.27127 l -27." + 
                       "8801,-22.59619 z",
              "undereye1": "m 81.988931,238.07538 10.094344,11.75377 43.53332" + 
                           "5,0.51016 -48.592211,5.3531 z",
              "iris2": "m 257.74383,188.23092 c 13.84828,23.71721 9.94978,53." + 
                       "5846 -13.24529,63.25993 l -21.92361,0.89323 c -17.552" + 
                       "26,-9.11876 -22.2507,-29.61621 -18.03142,-46.27127 l " + 
                       "27.8801,-22.59619 z",
              "undereye2": "m 263.37716,238.07545 -10.09434,11.75377 -43.5333" + 
                           "2,0.51016 48.59221,5.3531 z",
              "pupil1": "m 134.79588,216.12703 c 0,16.30049 -10.53307,29.5146" + 
                        "3 -23.52627,29.51463 -12.993202,0 -23.526266,-13.214" + 
                        "14 -23.526266,-29.51463 0,-16.30048 10.533064,-29.51" + 
                        "462 23.526266,-29.51462 12.9932,0 23.52627,13.21414 " + 
                        "23.52627,29.51462 z",
              "bigreflect1": "m 139.7868,215.50037 c 0,13.26981 -8.41818,24.0" + 
                             "271 -18.80254,24.0271 -10.38435,0 -18.80254,-10" + 
                             ".75729 -18.80254,-24.0271 0,-13.2698 8.41819,-2" + 
                             "4.02709 18.80254,-24.02709 10.38436,0 18.80254," + 
                             "10.75729 18.80254,24.02709 z",
              "smallreflect1": "m 100.30147,230.4263 c 0,5.02644 -3.507581,9." + 
                               "10117 -7.834397,9.10117 -4.326816,0 -7.834393" + 
                               ",-4.07473 -7.834393,-9.10117 0,-5.02644 3.507" + 
                               "577,-9.10118 7.834393,-9.10118 4.326816,0 7.8" + 
                               "34397,4.07474 7.834397,9.10118 z",
              "pupil2": "m 259.48572,216.12673 c 0,16.30049 -10.53307,29.5146" + 
                        "3 -23.52627,29.51463 -12.9932,0 -23.52627,-13.21414 " + 
                        "-23.52627,-29.51463 0,-16.30048 10.53307,-29.51462 2" + 
                        "3.52627,-29.51462 12.9932,0 23.52627,13.21414 23.526" + 
                        "27,29.51462 z",
              "bigreflect2": "m 264.47664,215.50008 c 0,13.26981 -8.41818,24." + 
                             "0271 -18.80254,24.0271 -10.38435,0 -18.80254,-1" + 
                             "0.75729 -18.80254,-24.0271 0,-13.2698 8.41819,-" + 
                             "24.02709 18.80254,-24.02709 10.38436,0 18.80254" + 
                             ",10.75729 18.80254,24.02709 z",
              "smallreflect2": "m 224.99131,230.42601 c 0,5.02644 -3.50758,9." + 
                               "10117 -7.8344,9.10117 -4.32681,0 -7.83439,-4." + 
                               "07473 -7.83439,-9.10117 0,-5.02644 3.50758,-9" + 
                               ".10118 7.83439,-9.10118 4.32682,0 7.8344,4.07" + 
                               "474 7.8344,9.10118 z",
              "brow1": "m 145.64216,200.8311 c 1.44669,-1.76644 11.16391,-17." + 
                       "89312 11.35964,-19.35912 -18.46575,-13.32224 -65.6677" + 
                       "49,-25.63136 -88.983726,-21.15363 19.788779,5.05343 6" + 
                       "2.242036,17.19552 77.624096,40.51274 z",
              "brow2": "m 200.00424,199.11668 c -4.13206,-8.74415 -8.49497,-1" + 
                       "5.3572 -9.71674,-18.98217 17.38313,-12.04297 64.9781," + 
                       "-28.17937 83.09429,-17.79938 -29.45419,1.68562 -66.49" + 
                       "058,26.50178 -73.37755,36.78155 z",
              "lash1": "m 70.293561,188.26905 0.002,-0.006 0.0037,-0.003 -0.0" + 
                       "06,0.005 3.97e-4,0.001 -0.003,-8.1e-4 c 51.000912,-28" + 
                       ".64583 68.389382,9.80466 81.050512,35.85672 -24.1176," + 
                       "-43.84978 -40.5133,-33.82852 -81.042955,-35.8598 z",
              "lash2": "m 276.44441,189.59714 -0.0141,-0.0322 0.0263,0.013 -0" + 
                       ".0184,0.0103 0.0158,0.0123 -0.003,0.0344 c -50.77855," + 
                       "-29.0382 -71.10873,7.36316 -83.97037,33.31683 20.3127" + 
                       "9,-29.57689 54.57166,-40.22687 83.94558,-33.36947 l 0" + 
                       ".0342,0.0507 z",
              "hair": hair };


var expressions = { "happy":happy, "sad":sad, "angry":angry, "disgusted":disgusted,
                    "content":content, "disappointed":disappointed,
                    "surprised":surprised, "neutral":neutral};

function drawOneFace(paper, expression1, expression2, morphProp) {
  for (var i=0; i<pieces.length; i++) {
    var p=pieces[i]
    var path1 = expressions[expression1][p];
    if (expression2 == null) {
      var h = paper.path(path1);
    } else {
      var path2 = expressions[expression2][p];
      var interPath = intermediate(path1, path2, morphProp);
      var h = paper.path(interPath);
    }
    attr(h, colors[p]);
  }
}

function intermediate(from, to, pos) {
  var fromCurve = Raphael.path2curve(from);
  var toCurve = Raphael.path2curve(to);
  var diff = [];
  var attr = "path";
  //compute difference between paths and store in diff
  for (i = 0, ii = fromCurve.length; i < ii; i++) {
    diff[i] = [0];
    for (var j = 1, jj = fromCurve[i].length; j < jj; j++) {
      diff[i][j] = (toCurve[i][j] - fromCurve[i][j]);
    }
  }
  var S = " ";
  now = [];
  //compute new path string for intermediate image
  for (var i = 0, ii = fromCurve.length; i < ii; i++) {
    now[i] = [fromCurve[i][0]];
    for (var j = 1, jj = fromCurve[i].length; j < jj; j++) {
      now[i][j] = +fromCurve[i][j] + pos * diff[i][j];
    }
    now[i] = now[i].join(S);
  }
  return now.join(S);
}

function drawFace(paper, xpos, ypos, width, expression1, expression2, morphProp) {
  var scale = width/faceBoxWidth;
  for (var i=0; i<pieces.length; i++) {
    var p=pieces[i]
    var path1 = expressions[expression1][p];
    if (expression2 == null) {
      var mypath = path1;
    } else {
      var path2 = expressions[expression2][p];
      var interPath = intermediate(path1, path2, morphProp);
      var mypath = interPath;
    }
    var h = paper.path(mypath);
    attr(h, colors[p])
    h.transform("S" + scale + "," + scale + ",150,150" + "T" + xpos + "," + ypos);
  }
}

function Face(args) {
  if (args.paper == null) {
    console.log("error - need paper for new Face")
  } else if (args.x == null) {
    console.log("error - need x position for new Face")
  } else if (args.y == null) {
    console.log("error - need y position for new Face")
  } else if (args.ex1 == null) {
    console.log("error - need at least one expression for new Face")
  }
  var paper = args.paper;
  var x = args.x;
  var y = args.y;
  var width = args.width || 100;
  var ex1 = args.ex1;
  var ex2 = args.ex2;
  var mp = args.mp || 0;
  var scale = width/faceBoxWidth;
  var paths;
  makePaths(ex1, ex2);
  var faceObjects;
  drawObjects(paper, x, y);
  
  function updateVars(newArgs) {
    paper = newArgs.paper || paper;
    x = newArgs.x || x;
    y = newArgs.y || y;
    width = newArgs.width || width;
    ex1 = newArgs.ex1 || ex1;
    ex2 = newArgs.ex2 || ex2;
    mp = newArgs.mp || mp;
    scale = width/faceBoxWidth;
  }

  this.update = function(newArgs) {
    updateVars(newArgs);
    redraw();
  }
  
  this.animate = function(newArgs, ms) {
    updateVars(newArgs);
    makePaths();
    for (var i=0; i<paths.length; i++) {
      var myobj = faceObjects[i];
      var mypath = paths[i];
      myobj.animate({path:mypath}, ms);
    }
  }
  
  this.hide = function() {
    var st = paper.set(faceObjects);
    st.hide();
  }
  
  this.show = function() {
    var st = paper.set(faceObjects);
    st.show();
  }

  function makePaths() {
    paths = [];
    for (var i=0; i<pieces.length; i++) {
      var p=pieces[i]
      var path1 = expressions[ex1][p];
      if (ex2 == null) {
        var mypath = path1;
      } else {
        var path2 = expressions[ex2][p];
        var interPath = intermediate(path1, path2, morphProp);
        var mypath = interPath;
      }
      paths.push(mypath);
    }
  }

  function drawObjects() {
    faceObjects = [];
    for (var i=0; i<paths.length; i++) {
      var p=pieces[i]
      var mypath = paths[i];
      var h = paper.path(mypath);
      attr(h, colors[p])
      h.transform("S" + scale + "," + scale + ",150,150" + "T" + x + "," + y);
      faceObjects.push(h);
    }
  }

  function redraw() {
    makePaths();
    for (var i=0; i<faceObjects.length; i++) {
      var mypath = paths[i];
      var myobj = faceObjects[i];
      myobj.attr({path:mypath});
      myobj.transform("S" + scale + "," + scale + ",150,150" + "T" + x + "," + y);
    }
  }
}
