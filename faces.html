<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Faces</title>
<meta name="viewport" content="initial-scale=1.0">
</head> 

<body>


<!-- Scripts -->
<script src="./raphael.js" type="text/javascript"></script>

<script>
function attr(obj) {
  obj.attr({"stroke":"black", "stroke-width":2});
}

var pieces = ["brow1", "brow2", "eye1", "eye2", "pupil1", "pupil2", "face", "mouth"];
var happy = {"mouth": "m 111.62186,310.09132 115.15739,1.01015 c -25.3507,82.41705 -95.4092,64.45964 -115.15739,-1.01015 z",
             "brow1": "m 135.881,173.4182 c -14.92581,-8.69221 -35.58815,-8.98198 -52.589612,2.89898",
             "brow2": "m 200.22213,174.8522 c 15.58418,-10.31402 40.92337,-10.28497 54.13962,-1.11624",
             "face": "M 305.71429,225.71428 C 305.71429,333.01532 245.59253,420 171.42857,420 97.264618,420 37.142853,333.01532 37.142853,225.71428 c 0,-107.30104 60.121765,-194.285722 134.285717,-194.285722 74.16396,0 134.28572,86.984682 134.28572,194.285722 z",
             "eye1": "m 140.40105,208.55576 c -17.09163,-21.52819 -35.81719,-19.88262 -51.588846,-1 15.539946,11.01729 29.157726,11.23783 51.588846,1 z",
             "eye2": "m 203.50005,209.08622 c 10.59203,-22.90153 35.64588,-19.37916 47.5787,-1.54061 -20.6185,10.6789 -26.64304,11.22532 -47.5787,1.54061 z",
             "pupil1": "m 104.42325,194.90487 c -2.61532,6.12111 -2.14978,12.24222 0.22855,18.36333 8.3486,2.95374 14.82293,1.62345 20.85965,-0.70711 3.0587,-10.43465 0.63348,-12.01066 -0.35355,-15.9099 -6.74636,-3.39621 -13.65978,-2.62067 -20.73465,-1.74632 z",
             "pupil2": "m 216.625,196.625 c 6.88891,-2.48623 13.13793,-1.77299 19.375,-1 2.72407,6.23327 2.0436,12.22335 0.125,18.125 -6.16929,1.30074 -12.37511,2.53451 -20.5,0.25 -0.85676,-5.9239 -1.11761,-11.78159 1,-17.375 z"};
var surprised = {"mouth": "m 131.0673,337.31492 c 13.51028,-26.25666 64.61091,-26.0183 77.68073,0.30306 -8.44358,51.78035 -71.86821,46.07645 -77.68073,-0.30306 z",
                 "brow1": "m 134.24695,159.74085 c -18.62207,-10.01818 -49.119793,-2.64213 -55.711416,7.07107",
                 "brow2": "m 206.51041,161.45837 c 18.74154,-10.29059 36.79131,-9.82159 52.03984,5.59619",
                 "face": "M 305.71429,225.71428 C 305.71429,333.01532 245.59253,420 171.42857,420 97.264618,420 37.142853,333.01532 37.142853,225.71428 c 0,-107.30104 60.121765,-194.285722 134.285717,-194.285722 74.16396,0 134.28572,86.984682 134.28572,194.285722 z",
                 "eye1": "m 137.65105,208.55576 c -9.59163,-21.27819 -34.74085,-24.22993 -45.588846,-1.5 15.352286,15.81716 31.938556,11.26249 45.588846,1.5 z",
                 "eye2": "m 203.25005,211.58622 c 7.06557,-28.35117 43.71784,-24.49008 48.0787,-1.04061 -10.3685,8.6789 -33.89304,8.97532 -48.0787,1.04061 z",
                 "pupil1": "m 104.42325,194.90487 c -2.61532,6.12111 -2.14978,12.24222 0.22855,18.36333 10.42482,6.06808 16.50944,4.15321 20.85965,-0.70711 3.0587,-10.43465 0.63348,-12.01066 -0.35355,-15.9099 -6.50565,-4.84048 -13.00081,-6.57449 -20.73465,-1.74632 z",
                 "pupil2": "m 216.625,196.625 c 6.43429,-5.6977 12.65842,-5.16029 19.375,-1 2.72407,6.23327 2.0436,12.22335 0.125,18.125 -4.84242,3.95448 -11.90754,3.46964 -20.5,0.25 -0.85676,-5.9239 -1.11761,-11.78159 1,-17.375 z"};
var angry = {"mouth":"m 123.0673,347.81492 c 25.01028,-30.50809 77.11091,-32.26243 101.18073,0.30306 -18.44358,22.78035 -84.36821,20.57645 -101.18073,-0.30306 z",
             "face":"M 305.71429,225.71428 C 305.71429,333.01532 245.59253,420 171.42857,420 97.264618,420 37.142853,333.01532 37.142853,225.71428 c 0,-107.30104 60.121765,-194.285722 134.285717,-194.285722 74.16396,0 134.28572,86.984682 134.28572,194.285722 z",
             "brow1":"m 138.24695,197.49085 c -8.98749,-3.84477 -39.86323,-10.24283 -46.711416,-2.17893",
             "brow2":"m 200.76041,200.95837 c 6.6337,-2.71708 32.29897,-14.34458 49.28984,-4.15381",
             "eye1":"m 139.15105,213.55576 c -9.80587,-18.49308 -37.67659,-17.06526 -48.088846,0 16.371396,8.42725 38.998546,5.83299 48.088846,0 z",
             "eye2":"m 202.75005,216.58622 c 12.98082,-15.52915 44.28017,-16.26714 49.5787,-0.0406 -11.45765,7.22671 -38.14421,4.30709 -49.5787,0.0406 z",
             "pupil1":"m 103.17325,203.40487 c -2.61532,6.12111 -1.89978,7.49222 0.47855,13.61333 4.7309,-0.57483 16.62741,2.95751 22.85965,0.29289 1.25681,-3.88128 1.63135,-10.49194 0.64645,-14.4099 -6.50565,-1.55204 -16.25081,-2.35131 -23.98465,0.50368 z",
             "pupil2":"m 217.125,207.125 c 7.28216,-2.03522 15.9001,-3.01258 21.125,-1.5 1.37545,5.55896 0.47562,10.31436 -0.375,14.125 -5.10951,2.75256 -12.63515,-1.4296 -20.25,-0.25 -0.85676,-5.9239 -2.61761,-6.78159 -0.5,-12.375 z"};
var sad = {"brow1":"m 135.24695,173.74085 c -17.02429,-8.4204 -48.07605,-1.59839 -55.711416,7.07107",
           "brow2":"m m 206.51041,176.45837 c 17.02652,-6.86055 35.89645,-8.03187 52.03984,5.59619",
           "eye1":"m 137.65105,211.55576 c -3.24658,-22.87275 -35.38876,-27.86843 -46.588846,-1.5 12.331276,5.37703 35.670336,5.43972 46.588846,1.5 z",
           "eye2":"m 203.25005,211.58622 c 5.09876,-25.07315 41.68488,-21.10181 48.0787,-1.04061 -4.32296,4.64854 -32.59201,8.10797 -48.0787,1.04061 z",
           "pupil1":"m 104.42325,194.90487 c -2.61532,6.12111 -2.14978,12.24222 0.22855,18.36333 9.40692,-1.05724 16.30989,2.75637 20.85965,-0.70711 3.0587,-10.43465 0.63348,-12.01066 -0.35355,-15.9099 -6.10503,-4.03924 -10.96591,-2.5047 -20.73465,-1.74632 z",
           "pupil2":"m 216.625,196.625 c 6.43429,-2.10692 10.65842,-0.76801 17.375,-1 2.72407,6.23327 4.0436,12.22335 2.125,18.125 -4.42215,2.27342 -11.03011,-0.0401 -20.5,0.25 -0.85676,-5.9239 -1.11761,-11.78159 1,-17.375 z",
           "face":"M 305.71429,225.71428 C 305.71429,333.01532 245.59253,420 171.42857,420 97.264618,420 37.142853,333.01532 37.142853,225.71428 c 0,-107.30104 60.121765,-194.285722 134.285717,-194.285722 74.16396,0 134.28572,86.984682 134.28572,194.285722 z",
           "mouth":"m 128.0673,354.81492 c 22.01028,-33.98278 74.11091,-36.43616 98.18073,0.30306 -15.71594,-10.07469 -78.76668,-11.86194 -98.18073,-0.30306 z"};

var paper = Raphael(10, 50, 350, 500);

var faceAnimation = function(p) {
  var h = paper.path(happy[p]);
  attr(h);
  if (p=="pupil1" || p=="pupil2") {
    h.attr({"fill":"black"});
  }
  var happy2surprised = function() {
    var toSurprised = Raphael.animation({path:surprised[p]}, 1000, surprised2angry);
    h.animate(toSurprised.delay(500));
  }
  var angry2sad = function() {
    h.attr({path:angry[p]});
    var toSad = Raphael.animation({path:sad[p]}, 1000);
    h.animate(toSad.delay(500));
  }
  var surprised2angry = function() {
    h.attr({path:surprised[p]});
    var toAngry = Raphael.animation({path:angry[p]}, 1000, angry2sad);
    h.animate(toAngry.delay(500));
  }
  happy2surprised()
}

for (var i=0; i<pieces.length; i++) {
  var p = pieces[i];
  faceAnimation(p);
}

/*
function intermediate(from, to, pos) {
  var fromCurve = Raphael.path2curve(from);
  var toCurve = Raphael.path2curve(to);
  var diff = [];
  var attr = "path";
  //compute difference between paths and store in diff
  for (i = 0, ii = fromCurve.length; i < ii; i++) {
    diff[i] = [0];
    for (var j = 1, jj = fromCurve[i].length; j < jj; j++) {
      diff[i][j] = (toCurve[i][j] - fromCurve[i][j]);
    }
  }
  var S = " ";
  now = [];
  //compute new path string for intermediate image
  for (var i = 0, ii = fromCurve.length; i < ii; i++) {
    now[i] = [fromCurve[i][0]];
    for (var j = 1, jj = fromCurve[i].length; j < jj; j++) {
      now[i][j] = +fromCurve[i][j] + pos * diff[i][j];
    }
    now[i] = now[i].join(S);
  }
  return now.join(S);
}
*/
</script>

</body>
